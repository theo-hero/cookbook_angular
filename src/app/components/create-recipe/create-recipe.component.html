<button class="close-window" (click)="closeTheWindow($event)">X</button>

<form #recipeForm="ngForm" (ngSubmit)="onSubmit(recipeForm)" novalidate>
  <div class="form-group">
    <label for="title">Название</label>
    <input
      type="text"
      id="title"
      name="title"
      [(ngModel)]="recipe.title"
      required
      class="form-control" />
  </div>

  <div class="form-group">
    <label for="description">Описание</label>
    <textarea
      id="description"
      name="description"
      [(ngModel)]="recipe.description"
      rows="3"
      placeholder="Одно-два предложения"
      class="form-control"></textarea>
  </div>

  <div class="form-group">
    <label for="instructions">Инструкции по приготовлению</label>
    <textarea
      id="instructions"
      name="instructions"
      [(ngModel)]="recipe.instructions"
      rows="5"
      placeholder="Опишите рецепт пошагово"
      class="form-control"></textarea>
  </div>
  <div *ngFor="let ingredient of recipe.ingredients; let i = index" class="ingredient-row">
    <div class="form-group row">
      <div class="col-md-4">
        <select
          id="ingredient-name-{{i}}"
          [(ngModel)]="ingredient.name"
          class="form-control"
          name="ingredientName{{i}}">
          <option value="">Выберите ингредиент</option>
          <option *ngFor="let item of ingredientOptions">{{item}}</option>
          <option value="custom">Другой...</option>
        </select>
        <input
          *ngIf="ingredient.name === 'custom'"
          type="text"
          [(ngModel)]="ingredient.customName"
          placeholder="Введите название ингредиента"
          name="ingredientName{{i}}"
          class="form-control" />
      </div>
      <div class="col-md-3">
        <input
          id="quantity-{{i}}"
          type="number"
          [(ngModel)]="ingredient.quantity"
          min="0"
          step="0.1"
          class="form-control"
          name="ingredient-quantity{{i}}" />
      </div>
      <div class="col-md-3">
        <select
          id="unit-{{i}}"
          [(ngModel)]="ingredient.unit"
          class="form-control"
          name="unit{{i}}">
          <option value="">Выберите единицу...</option>
          <option *ngFor="let unit of unitOptions">{{unit}}</option>
        </select>
      </div>
      <div class="col-md-2">
        <button type="button" class="btn btn-danger" (click)="removeIngredient(i)">Удалить</button>
      </div>
    </div>
  </div>

  <button type="button" class="btn btn-primary" (click)="addIngredient()">Добавить ингредиент</button>

  <button type="submit" [disabled]="!recipeForm.valid">
    Сохранить
  </button>
</form>

<div *ngIf="recipeForm.submitted && !recipeForm.valid" class="alert alert-danger">
  Пожалуйста, заполните необходимые поля
</div>
